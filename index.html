<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>电商产品出入库管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="app-title">HAILANG出入库管理系统</div>
      <!-- <div class="app-subtitle"></div> -->
    </header>

    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="customers">客户信息</button>
      <button class="tab-btn" data-tab="inventory">产品库存</button>
      <button class="tab-btn" data-tab="inbound">产品入库</button>
      <button class="tab-btn" data-tab="outbound">产品出库</button>
      <button class="tab-btn" data-tab="reports">客户统计</button>
    </nav>

    <main class="app-main">
      <!-- 客户信息 -->
      <section class="tab-panel" data-tab="customers">
        <div class="panel-header">
          <div class="panel-header-main">
            <h2>客户信息</h2>
            <p>维护客户基础资料，为出库及统计提供依据。</p>
          </div>
          <button type="button" class="btn ghost toggle-forms-btn toggle-forms">
            只看表格
          </button>
        </div>
        <div class="panel-body two-columns">
          <form id="customer-form" class="form-card">
            <h3>新增 / 编辑客户</h3>
            <div class="form-grid">
              <label>
                客户名称
                <input type="text" name="name" required />
              </label>
              <label>
                联系电话
                <input type="text" name="phone" />
              </label>
              <label>
                司机电话
                <input type="text" name="driverPhone" />
              </label>
              <label>
                地址
                <input type="text" name="address" />
              </label>
              <label class="span-2">
                备注
                <input type="text" name="note" />
              </label>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn primary">保存客户</button>
              <button type="reset" class="btn">清空</button>
            </div>
          </form>

          <div class="table-card">
            <div class="table-card-header">
              <h3>客户列表</h3>
              <div class="table-card-tools">
                <button id="export-customers" class="btn ghost">导出为 CSV</button>
              </div>
            </div>
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>客户名称</th>
                    <th>电话</th>
                    <th>司机电话</th>
                    <th>地址</th>
                    <th>备注</th>
                    <th style="width:140px;">操作</th>
                  </tr>
                </thead>
                <tbody id="customer-table-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- 产品库存 -->
      <section class="tab-panel hidden" data-tab="inventory">
        <div class="panel-header">
          <div class="panel-header-main">
            <h2>产品库存</h2>
            <p>维护产品基础信息，并根据出入库记录自动计算当前库存。</p>
          </div>
          <button type="button" class="btn ghost toggle-forms-btn toggle-forms">
            只看表格
          </button>
        </div>
        <div class="panel-body two-columns">
          <form id="product-form" class="form-card">
            <h3>新增 / 编辑产品</h3>
            <div class="form-grid">
              <label>
                产品编号
                <input type="text" name="sku" />
              </label>
              <label>
                产品名称
                <input type="text" name="name" required />
              </label>
              <label>
                规格型号
                <input type="text" name="spec" />
              </label>
              <label>
                单位
                <input type="text" name="unit" placeholder="件 / 箱 / 个" />
              </label>
              <label>
                默认单价
                <input type="number" step="0.01" name="price" />
              </label>
              <label>
                价格币种
                <select name="currency">
                  <option value="CNY">人民币 (CNY)</option>
                  <option value="KIP">老挝基普 (KIP)</option>
                  <option value="USD">美元 (USD)</option>
                  <option value="THB">泰铢 (THB)</option>
                </select>
              </label>
              <label>
                安全库存
                <input type="number" name="safeStock" />
              </label>
              <label class="span-2">
                备注
                <input type="text" name="note" />
              </label>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn primary">保存产品</button>
              <button type="reset" class="btn">清空</button>
            </div>
          </form>

          <div class="table-card">
            <div class="table-card-header">
              <h3>库存列表（自动统计）</h3>
              <div class="table-card-tools">
                <button id="export-inventory" class="btn ghost">
                  导出为 CSV
                </button>
              </div>
            </div>
            <div class="table-wrapper">
              <table class="inventory-table">
                <thead>
                  <tr>
                    <th>产品编号</th>
                    <th>产品名称</th>
                    <th>规格</th>
                    <th>单位</th>
                    <th>默认单价</th>
                    <th>币种</th>
                    <th>当前库存</th>
                    <th>安全库存</th>
                    <th>状态</th>
                    <th>备注</th>
                    <th style="width:120px;">操作</th>
                  </tr>
                </thead>
                <tbody id="inventory-table-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- 产品入库 -->
      <section class="tab-panel hidden" data-tab="inbound">
        <div class="panel-header">
          <div class="panel-header-main">
            <h2>产品入库</h2>
            <p>记录采购 / 退货等增加库存的单据。</p>
          </div>
          <button type="button" class="btn ghost toggle-forms-btn toggle-forms">
            只看表格
          </button>
        </div>
        <div class="panel-body two-columns">
          <form id="inbound-form" class="form-card">
            <h3>新增入库记录</h3>
            <div class="form-grid">
              <label>
                入库日期
                <input type="date" name="date" required />
              </label>
              <label>
                供应商 / 客户
                <select name="customerId"></select>
              </label>
              <label>
                产品
                <select name="productId" required></select>
              </label>
              <label>
                数量
                <input type="number" step="0.01" name="qty" required />
              </label>
              <label class="span-2">
                备注
                <input type="text" name="note" />
              </label>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn primary">保存入库</button>
              <button type="reset" class="btn">清空</button>
            </div>
          </form>

          <div class="table-card">
            <div class="table-card-header">
              <h3>入库明细</h3>
              <div class="table-card-tools">
                <label class="inline-label">
                  筛选月份
                  <input type="month" id="inbound-filter-month" />
                </label>
                <button id="export-inbound" class="btn ghost">
                  导出为 CSV
                </button>
              </div>
            </div>
            <div class="table-wrapper">
              <table class="inbound-table">
                <thead>
                  <tr>
                    <th>日期</th>
                    <th>供应商 / 客户</th>
                    <th>产品</th>
                    <th>数量</th>
                    <th>备注</th>
                    <th style="width:120px;">操作</th>
                  </tr>
                </thead>
                <tbody id="inbound-table-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- 产品出库 -->
      <section class="tab-panel hidden" data-tab="outbound">
        <div class="panel-header">
          <div class="panel-header-main">
            <h2>产品出库</h2>
            <p>记录销售 / 退货等减少库存的单据，可按客户统计。</p>
          </div>
          <button type="button" class="btn ghost toggle-forms-btn toggle-forms">
            只看表格
          </button>
        </div>
        <div class="panel-body two-columns">
          <form id="outbound-form" class="form-card">
            <h3>新增出库记录</h3>
            <div class="form-grid">
              <label>
                出库日期
                <input type="date" name="date" required />
              </label>
              <label>
                客户
                <select name="customerId" required></select>
              </label>
              <label>
                产品
                <select name="productId" required></select>
              </label>
              <label>
                数量
                <input type="number" step="0.01" name="qty" required />
              </label>
              <label>
                单价
                <input type="number" step="0.01" name="price" />
              </label>
              <label>
                币种
                <select name="currency">
                  <option value="CNY">人民币 (CNY)</option>
                  <option value="KIP">老挝基普 (KIP)</option>
                  <option value="USD">美元 (USD)</option>
                  <option value="THB">泰铢 (THB)</option>
                </select>
              </label>
              <label>
                金额（自动）
                <input type="number" step="0.01" name="amount" readonly />
              </label>
              <label>
                订单状态
                <select name="paymentStatus">
                  <option value="unpaid">未付款</option>
                  <option value="partial">部分付款</option>
                  <option value="paid">已付款</option>
                </select>
              </label>
              <label class="span-2">
                凭证图片（可选）
                <input type="file" name="image" accept="image/*" />
              </label>
              <label class="span-2">
                备注
                <input type="text" name="note" />
              </label>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn primary">保存出库</button>
              <button type="reset" class="btn">清空</button>
            </div>
          </form>

          <div class="table-card">
            <div class="table-card-header">
              <h3>出库明细</h3>
              <div class="table-card-tools">
                <label class="inline-label">
                  筛选月份
                  <input type="month" id="outbound-filter-month" />
                </label>
                <button id="export-outbound" class="btn ghost">
                  导出为 CSV
                </button>
              </div>
            </div>
            <div class="table-wrapper">
              <table class="outbound-table">
                <thead>
                  <tr>
                    <th>日期</th>
                    <th>客户</th>
                    <th>产品</th>
                    <th>数量</th>
                    <th>单价</th>
                    <th>金额</th>
                    <th>币种</th>
                    <th>订单状态</th>
                    <th>图片</th>
                    <th>备注</th>
                    <th style="width:80px;">操作</th>
                  </tr>
                </thead>
                <tbody id="outbound-table-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- 客户统计 -->
      <section class="tab-panel hidden" data-tab="reports">
        <div class="panel-header">
          <div class="panel-header-main">
            <h2>客户统计</h2>
            <p>按客户 + 月份统计出库数量和金额，可看到每天的明细。</p>
          </div>
        </div>
        <div class="panel-body report-layout">
          <form id="report-filter-form" class="form-inline">
            <label>
              客户
              <select id="report-customer-select"></select>
            </label>
            <label>
              统计月份
              <input type="month" id="report-month-input" />
            </label>
            <button type="submit" class="btn primary">生成统计</button>
          </form>

          <div class="report-summary" id="report-summary"></div>
          <div class="report-tables">
            <div class="table-card">
              <div class="table-card-header">
                <h3>按产品汇总</h3>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>产品</th>
                      <th>总数量</th>
                      <th>总金额</th>
                    </tr>
                  </thead>
                  <tbody id="report-product-tbody"></tbody>
                </table>
              </div>
            </div>

            <div class="table-card">
              <div class="table-card-header">
                <h3>每日明细</h3>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>日期</th>
                      <th>产品</th>
                      <th>数量</th>
                      <th>单价</th>
                      <th>金额</th>
                      <th>币种</th>
                      <th>订单状态</th>
                    <th>备注</th>
                    <th>图片</th>
                    <th>操作</th>
                    </tr>
                  </thead>
                  <tbody id="report-detail-tbody"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div id="image-modal" class="image-modal" aria-hidden="true">
      <div class="image-modal-backdrop" data-role="close-modal"></div>
      <div class="image-modal-inner">
        <button type="button" id="image-modal-close" class="modal-close" aria-label="关闭图片">
          &times;
        </button>
        <img id="image-modal-img" alt="凭证预览" />
      </div>
    </div>

    <footer class="app-footer">
      <span>数据本地保存（浏览器 localStorage），适合单机使用。</span>
      <div class="footer-actions">
        <button id="export-backup" class="btn ghost">导出备份</button>
        <label class="btn ghost">
          导入备份
          <input type="file" id="import-backup-input" accept="application/json" hidden />
        </label>
      </div>
    </footer>

    <script src="./script.js"></script>
  </body>
</html>


